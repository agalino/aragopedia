(function(b,a){if(!b.user.tokens.exists("patrolToken")){return}a(document).ready(function(){var c=a(".patrollink a");c.on("click",function(h){var g,f,i,d;g=a.createSpinner({size:"small",type:"inline"});a(this).hide().after(g);f=a(this).attr("href");i=b.util.getParamValue("rcid",f);d=new b.Api();d.post({action:"patrol",token:b.user.tokens.get("patrolToken"),rcid:i}).done(function(e){c.closest(".patrollink").remove();if(e.patrol!==undefined){var j=new b.Title(e.patrol.title);b.notify(b.msg("markedaspatrollednotify",j.toText()))}else{b.notify(b.msg("markedaspatrollederrornotify"))}}).fail(function(e){g.remove();c.show();if(e==="noautopatrol"){b.notify(b.msg("markedaspatrollederror-noautopatrol"))}else{b.notify(b.msg("markedaspatrollederrornotify"))}});h.preventDefault()})})}(mediaWiki,jQuery));