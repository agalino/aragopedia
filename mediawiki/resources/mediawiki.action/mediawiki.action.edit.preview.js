(function(c,b){function a(j){var i,h,k,m,g,f,d,l;j.preventDefault();b(c).trigger("LivePreviewPrepare");i=b("#wikiPreview");i.show();i[0].scrollIntoView();h=["#wikiPreview","#wikiDiff","#catlinks",".hiddencats","#p-lang",".templatesUsed",".mw-summary-preview"];m=b(h.join(","));k=[".mw-newarticletext"];b(k.join(",")).remove();g=b.createSpinner({size:"large",type:"block"});i.before(g);g.css({position:"absolute",marginTop:g.height()});i.css("minHeight",g.height()*2);m.animate({opacity:0.4},"fast");l=b("<div>");f=b("#editform").attr("action");d=b("#editform").formToArray();d.push({name:j.target.name,value:""});l.load(f+" "+h.join(","),d,function(){var e,n;for(e=0;e<h.length;e++){n=l.find(h[e]);b(h[e]).empty().append(n.contents()).attr("class",n.attr("class"))}g.remove();m.animate({opacity:1},"fast");b(c).trigger("LivePreviewDone",[h])})}b(document).ready(function(){if(b("#mw-userjsyoucanpreview").length||b("#mw-usercssyoucanpreview").length){return}if(!document.getElementById("p-lang")&&document.getElementById("p-tb")){b("#p-tb").after(b("<div>").prop("id","p-lang"))}if(!b(".mw-summary-preview").length){b(".editCheckboxes").before(b("<div>").prop("className","mw-summary-preview"))}if(!document.getElementById("wikiDiff")&&document.getElementById("wikiPreview")){b("#wikiPreview").after(b("<div>").prop("id","wikiDiff"))}c.loader.load("mediawiki.action.history.diff");b(document.body).on("click","#wpPreview, #wpDiff",a)})}(mediaWiki,jQuery));