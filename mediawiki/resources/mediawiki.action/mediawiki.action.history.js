jQuery(document).ready(function(d){var a=d("#mw-history-compare"),e,b=d("#pagehistory > li");function c(){var f=false,g=false;if(!b.length){return true}b.removeClass("selected").each(function(){var k=d(this),h=k.find('input[type="radio"]'),j=h.filter('[name="oldid"]').eq(0),i=h.filter('[name="diff"]').eq(0);if(!j.length||!i.length){return true}if(j.prop("checked")){g=true;k.addClass("selected");j.css("visibility","visible");i.css("visibility","hidden")}else{if(i.prop("checked")){f=true;k.addClass("selected");j.css("visibility","hidden");i.css("visibility","visible")}else{if(f&&g){j.css("visibility","visible");i.css("visibility","hidden")}else{if(f){i.css("visibility","visible");j.css("visibility","visible")}else{i.css("visibility","visible");j.css("visibility","hidden")}}}}});return true}b.find('input[name="diff"], input[name="oldid"]').click(c);c();a.find(".historysubmit").click(function(){e=d(this)});a.submit(function(i){var g,h,f;if(e){g=a.clone();h=g.find("#pagehistory > li").find('input[name="diff"], input[name="oldid"]');f=g.find('> [name="action"]');if(e.hasClass("mw-history-compareselectedversions-button")){f.remove();g.find('input[name^="ids["]:checked').prop("checked",false)}else{if(e.hasClass("mw-history-revisiondelete-button")){h.remove();f.val(e.attr("name"));g.find(":submit").remove()}}g.css("display","none").find("[id]").removeAttr("id").end().insertAfter(a).submit();i.preventDefault();return false}return true})});