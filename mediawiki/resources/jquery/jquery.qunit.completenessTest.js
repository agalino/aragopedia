(function(e){var c,b=Object.prototype.hasOwnProperty,d=(window.console&&window.console.log)?function(){return window.console.log.apply(window.console,arguments)}:function(){};c={keys:Object.keys||function(f){var g,h=[];for(g in f){if(b.call(f,g)){h.push(g)}}return h},extend:function(){var g,f,l,m,k=arguments[0]||{},h=1,j=arguments.length;for(;h<j;h++){g=arguments[h];if(g!==null&&g!==undefined){for(f in g){l=k[f];m=g[f];if(k===m){continue}if(m!==undefined){k[f]=m}}}}return k},each:function(g,h){var f;for(f in g){if(h.call(g[f],f,g[f])===false){break}}},type:e.type,isEmptyObject:e.isEmptyObject};function a(h,f){this.injectionTracker={};this.methodCallTracker={};this.missingTests={};this.ignoreFn=undefined===f?function(){return false}:f;this.lazyLimit=2000;this.lazyCounter=0;var g=this;QUnit.begin(function(){g.walkTheObject(null,h,h,[],a.ACTION_INJECT);d("CompletenessTest/walkTheObject/ACTION_INJECT",g)});QUnit.done(function(){g.populateMissingTests();d("CompletenessTest/populateMissingTests",g);var k,n,m,i,l;m=c.keys(g.injectionTracker).length;i=c.keys(g.methodCallTracker).length;l=c.keys(g.missingTests).length;function j(p,v,s){var r,u,t,q,o;u=document.createElement("strong");u.textContent=v||"Values";q=document.createElement("ul");c.each(p,function(x){var w=document.createElement("li");w.textContent=x;q.appendChild(w)});o=document.createElement("p");o.innerHTML="<em>&mdash; CompletenessTest</em>";t=document.createElement("div");t.appendChild(u);t.appendChild(q);t.appendChild(o);r=document.getElementById("qunit-completenesstest");if(!r){r=document.createElement("div");r.id="qunit-completenesstest"}r.appendChild(t);c.each(s,function(w,x){r.style[w]=x});return r}if(l===0){n=j({},"Detected calls to "+i+"/"+m+" methods. No missing tests!",{backgroundColor:"#D2E0E6",color:"#366097",paddingTop:"1em",paddingRight:"1em",paddingBottom:"1em",paddingLeft:"1em"})}else{n=j(g.missingTests,"Detected calls to "+i+"/"+m+" methods. "+l+" methods not covered:",{backgroundColor:"#EE5757",color:"black",paddingTop:"1em",paddingRight:"1em",paddingBottom:"1em",paddingLeft:"1em"})}k=document.getElementById("qunit-testrunner-toolbar");if(k){k.insertBefore(n,k.firstChild)}});return this}a.ACTION_INJECT=500;a.ACTION_CHECK=501;a.fn=a.prototype={walkTheObject:function(g,o,n,f,h){var m,l,j,k=c.type(o),i=this;if(this.ignoreFn(o,i,f)){return null}this.lazyCounter++;if(this.lazyCounter>this.lazyLimit){d("CompletenessTest.fn.walkTheObject> Limit reached: "+this.lazyCounter,f);return null}if(k==="function"){if(!o.prototype||c.isEmptyObject(o.prototype)){if(h===a.ACTION_INJECT){i.injectionTracker[f.join(".")]=true;i.injectCheck(n,f,function(){i.methodCallTracker[f.join(".")]=true})}}else{if(h===a.ACTION_INJECT){for(m in o.prototype){if(b.call(o.prototype,m)){l=o.prototype[m];if(m==="constructor"){continue}j=c.extend([],f);j.push("prototype");j.push(m);i.walkTheObject(m,l,n,j,h)}}}}}if(k==="function"||k==="object"){for(m in o){if(b.call(o,m)){l=o[m];j=c.extend([],f);j.push(m);i.walkTheObject(m,l,n,j,h)}}}},populateMissingTests:function(){var f=this;c.each(f.injectionTracker,function(g){f.hasTest(g)})},hasTest:function(f){if(!(f in this.methodCallTracker)){this.missingTests[f]=true;return false}return true},injectCheck:function(n,l,m){var h,j,g,k,f,o=n;for(h=0,j=l.length;h<j;h++){k=l[h];g=o;o=g[k];f=k}g[f]=function(){m();return o.apply(this,arguments)}}};window.CompletenessTest=a}(jQuery));