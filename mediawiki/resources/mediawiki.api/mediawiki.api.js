(function(c,b){var a={parameters:{action:"query",format:"json"},ajax:{url:c.util.wikiScript("api"),timeout:30*1000,dataType:"json"}};c.Api=function(d){if(d===undefined){d={}}if(d.ajax&&d.ajax.url!==undefined){d.ajax.url=String(d.ajax.url)}d.parameters=b.extend({},a.parameters,d.parameters);d.ajax=b.extend({},a.ajax,d.ajax);this.defaults=d};c.Api.prototype={normalizeAjaxOptions:function(d){var e=d||{};if(typeof d==="function"){e={ok:d}}return e},get:function(e,d){d=this.normalizeAjaxOptions(d);d.type="GET";return this.ajax(e,d)},post:function(e,d){d=this.normalizeAjaxOptions(d);d.type="POST";return this.ajax(e,d)},ajax:function(g,d){var f,e=b.Deferred();g=b.extend({},this.defaults.parameters,g);d=b.extend({},this.defaults.ajax,d);if(g.token){f=g.token;delete g.token}d.data=b.param(g).replace(/\./g,"%2E");if(f){d.data+="&token="+encodeURIComponent(f)}if(d.ok){e.done(d.ok);delete d.ok}if(d.err){e.fail(d.err);delete d.err}b.ajax(d).fail(function(i,j,h){e.reject("http",{xhr:i,textStatus:j,exception:h})}).done(function(h){if(h===undefined||h===null||h===""){e.reject("ok-but-empty","OK response but empty result (check HTTP headers?)")}else{if(h.error){var i=h.error.code===undefined?"unknown":h.error.code;e.reject(i,h)}else{e.resolve(h)}}});return e.promise().fail(function(i,h){c.log("mw.Api error: ",i,h)})}};c.Api.errors=["ok-but-empty","timeout","duplicate","duplicate-archive","noimageinfo","uploaddisabled","nomodule","mustbeposted","badaccess-groups","stashfailed","missingresult","missingparam","invalid-file-key","copyuploaddisabled","mustbeloggedin","empty-file","file-too-large","filetype-missing","filetype-banned","filetype-banned-type","filename-tooshort","illegal-filename","verification-error","hookaborted","unknown-error","internal-error","overwrite","badtoken","fetchfileerror","fileexists-shared-forbidden","invalidtitle","notloggedin"];c.Api.warnings=["duplicate","exists"]}(mediaWiki,jQuery));