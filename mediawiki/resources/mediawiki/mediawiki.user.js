(function(c,a){function b(e,h){var d,f;d=this;f={};function g(j,k){var i;if(f[j]){f[j].add(k);return}f.rights=a.Callbacks("once memory");f.groups=a.Callbacks("once memory");f[j].add(k);i=new c.Api();i.get({action:"query",meta:"userinfo",uiprop:"rights|groups"}).always(function(m){var n,l;if(m.query&&m.query.userinfo){n=m.query.userinfo.rights;l=m.query.userinfo.groups}f.rights.fire(n||[]);f.groups.fire(l||[])})}this.options=e||new c.Map();this.tokens=h||new c.Map();this.generateRandomSessionId=function(){var k,l,m="",j="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(k=0;k<32;k++){l=Math.floor(Math.random()*j.length);m+=j.substring(l,l+1)}return m};this.getName=function(){return c.config.get("wgUserName")};this.name=function(){return this.getName()};this.getRegistration=function(){var i=c.config.get("wgUserRegistration");if(this.isAnon()){return false}else{if(i===null){return null}else{return new Date(i)}}};this.isAnon=function(){return d.getName()===null};this.anonymous=function(){return d.isAnon()};this.sessionId=function(){var i=a.cookie("mediaWiki.user.sessionId");if(typeof i==="undefined"||i===null){i=d.generateRandomSessionId();a.cookie("mediaWiki.user.sessionId",i,{expires:null,path:"/"})}return i};this.id=function(){var i=d.getName();if(i){return i}return d.sessionId()};this.bucket=function(r,s){var i,m,o,j,n,l,q,p;s=a.extend({buckets:{},version:0,tracked:false,expires:30},s||{});i=a.cookie("mediaWiki.user.bucket:"+r);if(typeof i==="string"&&i.length>2&&i.indexOf(":")>0){m=i.split(":");if(m.length>1&&Number(m[0])===s.version){o=Number(m[0]);j=String(m[1])}}if(j===undefined){if(!a.isPlainObject(s.buckets)){throw"Invalid buckets error. Object expected for options.buckets."}o=Number(s.version);n=0;for(l in s.buckets){n+=s.buckets[l]}q=Math.random()*n;p=0;for(l in s.buckets){j=l;p+=s.buckets[l];if(p>=q){break}}if(s.tracked){c.loader.using("jquery.clickTracking",function(){a.trackAction("mediaWiki.user.bucket:"+r+"@"+o+":"+j)})}a.cookie("mediaWiki.user.bucket:"+r,o+":"+j,{path:"/",expires:Number(s.expires)})}return j};this.getGroups=function(i){g("groups",i)};this.getRights=function(i){g("rights",i)}}c.user=new b(c.user.options,c.user.tokens)}(mediaWiki,jQuery));