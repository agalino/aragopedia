(function(g,e){var b,c=false,a=[],i=null;function f(k,j){var l,n,m;l=e('<div class="mw-notification"></div>').data("mw.notification",this).addClass(j.autoHide?"mw-notification-autohide":"mw-notification-noautohide");if(j.tag){j.tag=j.tag.replace(/[ _\-]+/g,"-").replace(/[^\-a-z0-9]+/ig,"");if(j.tag){l.addClass("mw-notification-tag-"+j.tag)}else{delete j.tag}}if(j.title){n=e('<div class="mw-notification-title"></div>').text(j.title).appendTo(l)}m=e('<div class="mw-notification-content"></div>');if(typeof k==="object"){if(k instanceof g.Message){m.html(k.parse())}else{m.append(k)}}else{m.text(k)}m.appendTo(l);this.isOpen=false;this.isPaused=true;this.message=k;this.options=j;this.$notification=l}f.prototype.start=function(){var q,m,l,n,p,o,j,k;if(this.isOpen){return}this.isOpen=true;m=this.options;q=this.$notification;l=this.$notification.css("opacity");q.css("opacity",0);if(m.tag){n=i.find(".mw-notification-tag-"+m.tag)}if(m.tag&&n.length){p=0;n.each(function(){var r=e(this).data("mw.notification");if(r){p=r.$notification.outerHeight(true);if(r.$replacementPlaceholder){o=r.$replacementPlaceholder.height();r.$replacementPlaceholder.remove();delete r.$replacementPlaceholder}r.close({speed:"fast",placeholder:false})}});if(o!==undefined){p=o}q.insertBefore(n.first()).css({position:"absolute",width:q.width()}).animate({opacity:l},{duration:"slow",complete:function(){e(this).css({opacity:""})}});k=this;k.$replacementPlaceholder=e("<div>").css("height",p).insertAfter(n.eq(-1)).animate({height:q.outerHeight(true)},{speed:"fast",complete:function(){if(k.$replacementPlaceholder){q.css("position","")}e(this).remove()}})}else{q.appendTo(i).animate({opacity:l},{duration:"fast",complete:function(){e(this).css("opacity","")}})}j=i.find(".mw-notification-autohide").length;if(j<=b.autoHideLimit){this.resume()}};f.prototype.pause=function(){if(this.isPaused){return}this.isPaused=true;if(this.timeout){clearTimeout(this.timeout);delete this.timeout}};f.prototype.resume=function(){var j=this;if(!j.isPaused){return}if(j.options.autoHide){j.isPaused=false;j.timeout=setTimeout(function(){delete j.timeout;j.close()},b.autoHideSeconds*1000)}};f.prototype.close=function(k){if(!this.isOpen){return}this.isOpen=false;this.pause();k=e.extend({speed:"slow",placeholder:true},k);this.$notification.removeClass("mw-notification-autohide");b.resume();this.$notification.css({pointerEvents:"none",position:"absolute",width:this.$notification.width()}).css(this.$notification.position());if(k.placeholder){var j=e("<div>").css("height",this.$notification.outerHeight(true)).insertBefore(this.$notification)}this.$notification.animate({opacity:0,top:"-=35"},{duration:k.speed,complete:function(){e(this).remove();if(k.placeholder){j.slideUp("fast",function(){e(this).remove()})}}})};function d(k,j){k.each(function(){var l=e(this).data("mw.notification");if(l){l[j]()}})}function h(){i=e('<div id="mw-notification-area"></div>').on({mouseenter:b.pause,mouseleave:b.resume}).on("click",".mw-notification",function(){var j=e(this).data("mw.notification");if(j){j.close()}}).on("click","a",function(j){j.stopPropagation()});g.util.$content.prepend(i)}b={pause:function(){d(i.children(".mw-notification"),"pause")},resume:function(){d(i.children(".mw-notification-autohide").slice(0,b.autoHideLimit),"resume")},notify:function(l,k){var j;k=e.extend({},b.defaults,k);j=new f(l,k);if(c){j.start()}else{a.push(j)}},defaults:{autoHide:true,tag:false,title:undefined},autoHideSeconds:5,autoHideLimit:3};e(function(){var j;h();c=true;while(a.length){j=a.shift();j.start()}});g.notification=b}(mediaWiki,jQuery));