/*!
 * @author Neil Kandalgaonkar, 2010
 * @author Timo Tijhof, 2011
 * @since 1.18
 *
 * Relies on: mw.config (wgFormattedNamespaces, wgNamespaceIds, wgCaseSensitiveNamespaces), mw.util.wikiGetlink
 */
(function(j,d){function f(n,m){this.ns=0;this.name=null;this.ext=null;if(arguments.length===2){a(this,n);this.ns=l(m)}else{if(arguments.length===1){b(this,n)}}return this}var i,g=function(m){if(m!==undefined){return m.replace(/[\x00-\x1f\x23\x3c\x3e\x5b\x5d\x7b\x7c\x7d\x7f\s]+/g,"_")}},k=function(m){if(m!==null&&m!==undefined){return m.replace(/_/g," ")}else{return""}},e=function(m){return g(d.trim(m))},c=function(m){return g(m)},l=function(n){var m=j.config.get("wgFormattedNamespaces")[n.toString()];if(m===undefined){return false}else{return Number(n)}},h=function(m){if(typeof m!=="string"){return false}m=g(d.trim(m.toLowerCase()));var n=j.config.get("wgNamespaceIds")[m];if(n===undefined){j.log("mw.Title: Unrecognized namespace: "+m);return false}return l(n)},b=function(o,m){var n=m.match(/^(?:([^:]+):)?(.*?)(?:\.(\w+))?$/),p=h(n[1]);if(p&&typeof n[2]==="string"&&n[2]!==""){o.ns=p;o.name=e(n[2]);if(typeof n[3]==="string"&&n[3]!==""){o.ext=c(n[3])}}else{o.ns=0;a(o,m)}return o},a=function(o,m){var n=m.match(/^(?:)?(.*?)(?:\.(\w+))?$/);if(typeof n[1]==="string"&&n[1]!==""){o.name=e(n[1]);if(typeof n[2]==="string"&&n[2]!==""){o.ext=c(n[2])}}else{throw new Error('mw.Title: Could not parse title "'+m+'"')}return o};f.exists=function(p){var n=d.type(p),o=f.exist.pages,m;if(n==="string"){m=o[p]}else{if(n==="object"&&p instanceof f){m=o[p.toString()]}else{throw new Error("mw.Title.exists: title must be a string or an instance of Title")}}if(typeof m==="boolean"){return m}return null};f.exist={pages:{},set:function(q,p){q=d.isArray(q)?q:[q];p=p===undefined?true:!!p;var n=this.pages,o,m=q.length;for(o=0;o<m;o++){n[q[o]]=p}return true}};i={constructor:f,getNamespaceId:function(){return this.ns},getNamespacePrefix:function(){return j.config.get("wgFormattedNamespaces")[this.ns].replace(/ /g,"_")+(this.ns===0?"":":")},getName:function(){if(d.inArray(this.ns,j.config.get("wgCaseSensitiveNamespaces"))!==-1){return this.name}else{return d.ucFirst(this.name)}},getNameText:function(){return k(this.getName())},getPrefixedDb:function(){return this.getNamespacePrefix()+this.getMain()},getPrefixedText:function(){return k(this.getPrefixedDb())},getMain:function(){return this.getName()+this.getDotExtension()},getMainText:function(){return k(this.getMain())},getExtension:function(){return this.ext},getDotExtension:function(){return this.ext===null?"":"."+this.ext},getUrl:function(){return j.util.wikiGetlink(this.toString())},exists:function(){return f.exists(this)}};i.toString=i.getPrefixedDb;i.toText=i.getPrefixedText;f.prototype=i;j.Title=f}(mediaWiki,jQuery));