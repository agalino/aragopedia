(function(e,c){function a(h,i,g,f){if(i===undefined||i===null||i===""){return""}return h+(f?i:e.Uri.encode(i))+g}var d={strict:/^(?:([^:\/?#]+):)?(?:\/\/(?:(?:([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?([^:\/?#]*)(?::(\d*))?)?((?:[^?#\/]*\/)*[^?#]*)(?:\?([^#]*))?(?:#(.*))?/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?(?:(?:([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?([^:\/?#]*)(?::(\d*))?((?:\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?[^?#\/]*)(?:\?([^#]*))?(?:#(.*))?/},b=["protocol","user","password","host","port","path","query","fragment"];e.UriRelative=function(g){var h;function f(j,i){i=typeof i==="object"?i:{strictMode:!!i};i=c.extend({strictMode:false,overrideKeys:false},i);if(j!==undefined&&j!==null&&j!==""){if(typeof j==="string"){this.parse(j,i)}else{if(typeof j==="object"){for(var k in j){if(j.hasOwnProperty(k)){if(c.isArray(j[k])||c.isPlainObject(j[k])){this[k]=c.extend(true,{},j[k])}else{this[k]=j[k]}}}if(!this.query){this.query={}}}}}else{return h.clone()}if(!this.protocol){this.protocol=h.protocol}if(!this.host){this.host=h.host;if(!this.port){this.port=h.port}}if(this.path&&this.path.charAt(0)!=="/"){throw new Error("Bad constructor arguments")}if(!(this.protocol&&this.host&&this.path)){throw new Error("Bad constructor arguments")}}f.encode=function(i){return encodeURIComponent(i).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")};f.decode=function(i){return decodeURIComponent(i.replace(/\+/g,"%20"))};f.prototype={parse:function(m,i){var l,j=this,k=d[i.strictMode?"strict":"loose"].exec(m);c.each(b,function(n,o){j[o]=k[n+1]});l={};if(j.query){j.query.replace(/(?:^|&)([^&=]*)(?:(=)([^&]*))?/g,function(o,n,s,r){var q,p;if(n){q=f.decode(n);p=(s===""||s===undefined)?null:f.decode(r);if(i.overrideKeys||l[q]===undefined){l[q]=p}else{if(typeof l[q]==="string"){l[q]=[l[q]]}if(c.isArray(l[q])){l[q].push(p)}}}})}this.query=l},getUserInfo:function(){return a("",this.user,a(":",this.password,""))},getHostPort:function(){return this.host+a(":",this.port,"")},getAuthority:function(){return a("",this.getUserInfo(),"@")+this.getHostPort()},getQueryString:function(){var i=[];c.each(this.query,function(l,n){var j=f.encode(l),m=c.isArray(n)?n:[n];c.each(m,function(o,k){if(k===null){i.push(j)}else{if(j==="title"){i.push(j+"="+e.util.wikiUrlencode(k))}else{i.push(j+"="+f.encode(k))}}})});return i.join("&")},getRelativePath:function(){return this.path+a("?",this.getQueryString(),"",true)+a("#",this.fragment,"")},toString:function(){return this.protocol+"://"+this.getAuthority()+this.getRelativePath()},clone:function(){return new f(this)},extend:function(i){c.extend(this.query,i);return this}};h=new f(g);return f};if(document&&document.location&&document.location.href){e.Uri=e.UriRelative(document.location.href)}}(mediaWiki,jQuery));