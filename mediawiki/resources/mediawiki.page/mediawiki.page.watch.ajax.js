(function(e,c){var d=e.config.get("wgRelevantPageName",e.config.get("wgPageName"));function a(f,h,g){var i,l,k,j;l=g==="loading"?h+"ing":h;j=h==="watch"?"unwatch":"watch";i=f.attr("title").match(e.util.tooltipAccessKeyRegexp);k=f.closest("li");if(g===undefined){k.trigger("watchpage.mw",j)}f.text(e.msg(l)).attr("title",e.msg("tooltip-ca-"+h)+(i?" "+i[0]:"")).attr("href",e.util.wikiScript()+"?"+c.param({title:d,action:h}));if(k.prop("id")==="ca-"+j){k.prop("id","ca-"+h)}if(k.hasClass("icon")){if(g==="loading"){f.addClass("loading")}else{f.removeClass("loading")}}}function b(g){var k,n,j,h,f,l;n=e.config.get("wgActionPaths");k=e.util.getParamValue("action",g);if(k!==null){return k}for(j in n){if(n.hasOwnProperty(j)){l=n[j].split("$1");for(h=0;h<l.length;h+=1){l[h]=c.escapeRE(l[h])}f=new RegExp(l.join("(.+)")).exec(g);if(f&&f[1]){return j}}}return"view"}e.page.watch={updateWatchLink:a};c(document).ready(function(){var f=c(".mw-watchlink a, a.mw-watchlink, #ca-watch a, #ca-unwatch a, #mw-unwatch-link1, #mw-unwatch-link2, #mw-watch-link2, #mw-watch-link1");f=f.filter(":not( #bodyContent *, #content * )");f.click(function(j){var i,h,g;i=b(this.href);if(i!=="watch"&&i!=="unwatch"){return true}j.preventDefault();j.stopPropagation();g=c(this);a(g,i,"loading");h=new e.Api();h[i](d,function(k){var m,l;l=i==="watch"?"unwatch":"watch";m=g.closest("li");e.notify(c.parseHTML(k.message),{tag:"watch-self"});a(g,l);if(k.watched!==undefined){c("#wpWatchthis").prop("checked",true)}else{c("#wpWatchthis").prop("checked",false)}},function(){var l,m,k;a(g,i);l=d.replace(/_/g," ");k=e.html.element("a",{href:e.util.wikiGetlink(d),title:l},l);m=e.message("watcherrortext",k);e.notify(m,{tag:"watch-self"})})})})}(mediaWiki,jQuery));