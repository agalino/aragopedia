(function(d,c){var a,b=c.getFootHovzer();a=d.Debug={$container:null,data:{},init:function(e){this.data=e||d.config.get("debugInfo");this.buildHtml();b.$.append(this.$container);b.update();c(".mw-debug-panelink").click(this.switchPane)},switchPane:function(k){var g=a.$container.data("currentPane"),i=c(this).prop("id").substr(9),h=c("#mw-debug-pane-"+g),j=c("#mw-debug-pane-"+i),f=false;function l(){if(!f){b.update();f=true}}k.preventDefault();c(this).addClass("current ");c(".mw-debug-panelink").not(this).removeClass("current ");if(i===g){h.slideUp(l);a.$container.data("currentPane",null);return}a.$container.data("currentPane",i);if(g===undefined||g===null){j.slideDown(l)}else{h.hide();j.show();l()}},buildHtml:function(){var j,f,h,l,k;j=c('<div id="mw-debug-toolbar" class="mw-debug" lang="en" dir="ltr"></div>');f=c('<div class="mw-debug-bits"></div>');function g(m){return c("<div>").prop({id:"mw-debug-"+m,className:"mw-debug-bit"}).appendTo(f)}function i(n,m){return c("<a>").prop({className:"mw-debug-panelabel",href:"#mw-debug-pane-"+n}).text(m)}function e(o,n,m){if(m){n=n+" ("+m+")"}return c("<div>").prop({id:"mw-debug-"+o,className:"mw-debug-bit mw-debug-panelink"}).append(i(o,n)).appendTo(f)}e("console","Console",this.data.log.length);e("querylist","Queries",this.data.queries.length);e("debuglog","Debug log",this.data.debugLog.length);e("request","Request");e("includes","PHP includes",this.data.includes.length);k="";if(this.data.gitRevision!==false){k="("+this.data.gitRevision.substring(0,7)+")";if(this.data.gitViewUrl!==false){k=c("<a>").attr("href",this.data.gitViewUrl).text(k)}}g("mwversion").append(c('<a href="//www.mediawiki.org/">MediaWiki</a>')).append(document.createTextNode(": "+this.data.mwVersion+" ")).append(k);if(this.data.gitBranch!==false){g("gitbranch").text("Git branch: "+this.data.gitBranch)}g("phpversion").append(c('<a href="//www.php.net/"></a>').text("PHP")).append(": "+this.data.phpVersion);g("time").text("Time: "+this.data.time.toFixed(5));g("memory").text("Memory: "+this.data.memory+" (Peak: "+this.data.memoryPeak+")");f.appendTo(j);h={console:this.buildConsoleTable(),querylist:this.buildQueryTable(),debuglog:this.buildDebugLogTable(),request:this.buildRequestPane(),includes:this.buildIncludesPane()};for(l in h){if(!h.hasOwnProperty(l)){continue}c("<div>").prop({className:"mw-debug-pane",id:"mw-debug-pane-"+l}).append(h[l]).appendTo(j)}this.$container=j},buildConsoleTable:function(){var e,j,f,h,g;e=c('<table id="mw-debug-console">');c("<colgroup>").css("width",20+(10*11)).appendTo(e);c("<colgroup>").appendTo(e);c("<colgroup>").css("width",350).appendTo(e);j=function(i){switch(i){case"log":return"Log";case"warn":return"Warning";case"deprecated":return"Deprecated";default:return"Unknown"}};for(f=0,h=this.data.log.length;f<h;f+=1){g=this.data.log[f];g.typeText=j(g.type);c("<tr>").append(c("<td>").text(g.typeText).addClass("mw-debug-console-"+g.type)).append(c("<td>").html(g.msg)).append(c("<td>").text(g.caller)).appendTo(e)}return e},buildQueryTable:function(){var e,f,g,h;e=c('<table id="mw-debug-querylist"></table>');c("<tr>").append(c("<th>#</th>").css("width","4em")).append(c("<th>SQL</th>")).append(c("<th>Time</th>").css("width","8em")).append(c("<th>Call</th>").css("width","18em")).appendTo(e);for(f=0,g=this.data.queries.length;f<g;f+=1){h=this.data.queries[f];c("<tr>").append(c("<td>").text(f+1)).append(c("<td>").text(h.sql)).append(c('<td class="stats">').text((h.time*1000).toFixed(4)+"ms")).append(c("<td>").text(h["function"])).appendTo(e)}return e},buildDebugLogTable:function(){var f,g,h,e;f=c("<ul>");for(g=0,h=this.data.debugLog.length;g<h;g+=1){e=this.data.debugLog[g];c("<li>").html(d.html.escape(e).replace(/\n/g,"<br />\n")).appendTo(f)}return f},buildRequestPane:function(){function e(j,i){var f,g,h;f=c("<div>").append(c("<h2>").text(j));g=c("<table>").appendTo(f);c("<tr>").html("<th>Key</th><th>Value</th>").appendTo(g);for(h in i){if(!i.hasOwnProperty(h)){continue}c("<tr>").append(c("<th>").text(h)).append(c("<td>").text(i[h])).appendTo(g)}return f}return c("<div>").text(this.data.request.method+" "+this.data.request.url).append(e("Headers",this.data.request.headers)).append(e("Parameters",this.data.request.params))},buildIncludesPane:function(){var e,g,h,f;e=c("<table>");for(g=0,h=this.data.includes.length;g<h;g+=1){f=this.data.includes[g];c("<tr>").append(c("<td>").text(f.name)).append(c('<td class="nr">').text(f.size)).appendTo(e)}return e}}}(mediaWiki,jQuery));